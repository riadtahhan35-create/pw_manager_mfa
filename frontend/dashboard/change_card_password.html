<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Change Card Password</title>
  <link rel="stylesheet" href="/frontend/assets/css/main.css" />

  <style>
    .page-wrap{
      min-height: 100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 24px;
    }
    .card.wide{
      width: min(760px, 96vw);
      padding: 26px;
      border-radius: 18px;
    }
    .head{
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      margin-bottom: 18px;
    }
    .head h2{ margin:0; font-size:28px; }
    .section{
      margin-top: 16px;
      padding: 16px;
      border-radius: 14px;
      background: rgba(255,255,255,.05);
    }
    .label{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom: 8px;
      opacity: .95;
      font-weight: 700;
    }
    .input-row{
      display:flex;
      gap: 10px;
      align-items: stretch;
    }
    .input-row input{
      width: 100% !important;
      flex: 1 1 auto;
      padding: 14px 14px;
      border-radius: 12px;
      outline: none;
    }
    .icon-btn{
      white-space: nowrap;
      min-width: 140px;
      border-radius: 12px;
      padding: 0 14px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 8px;
      cursor:pointer;
      user-select:none;
    }
    .hint{
      margin-top: 10px;
      opacity: .85;
      line-height: 1.5;
    }
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 14px;
    }
    .check{
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(255,255,255,.04);
    }
    .check input{
      width: 18px !important;
      height: 18px;
    }
    .range-row{
      display:flex;
      align-items:center;
      gap: 14px;
      margin-top: 12px;
    }
    .range-row input[type="range"]{
      width: 100% !important;
      flex: 1 1 auto;
    }
    .pill{
      min-width: 44px;
      text-align:center;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      font-weight: 800;
    }
    .actions{
      display:flex;
      gap: 12px;
      margin-top: 18px;
    }
    .actions button{
      width: 100%;
      border-radius: 12px;
      padding: 14px 14px;
      font-weight: 900;
      letter-spacing: .2px;
    }
    .status-line{
      margin-top: 12px;
      font-weight: 800;
      min-height: 22px;
      opacity: .95;
    }
    .status-line.ok{ color: #2ecc71; }
    .status-line.err{ color: #ff6b6b; }

    @media (max-width: 720px){
      .grid{ grid-template-columns: 1fr; }
      .icon-btn{ min-width: 120px; }
    }
  </style>

  <!-- ‚úÖ deps needed by vault_crypto.js (same as add.html) -->
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/argon2-browser/dist/argon2-bundled.min.js"></script>

  <!-- ‚úÖ IMPORTANT: include Face.js before vault_crypto.js -->
  <!-- ÿßÿ≥ÿ™ÿπŸÖŸÑ ŸÜŸÅÿ≥ ÿßŸÑŸÖÿ≥ÿßÿ± ÿßŸÑŸÑŸä ÿπŸÜÿØŸÉ ÿ¥ÿ∫ÿßŸÑ ŸÅŸä add.html -->
  <script defer src="/frontend/mfa/face_verify/face.js"></script>

  <!-- ‚úÖ vault crypto -->
  <script defer src="/frontend/crypto/vault_crypto.js"></script>

  <!-- ‚úÖ page logic -->
  <script defer src="/frontend/dashboard/change_card_password.js"></script>
</head>

<body>
  <div class="page-wrap">
    <div class="card wide">
      <div class="head">
        <h2>üîê Change Card Password</h2>
      </div>

      <div class="section">
        <div class="label">
          <span>New Password</span>
          <span style="opacity:.75;font-weight:700;">Prefer generated passwords</span>
        </div>

        <div class="input-row">
          <input id="password" type="password" placeholder="Enter new password" autocomplete="new-password"/>
          <button id="toggle" class="secondary icon-btn" type="button">üëÅ Show</button>
        </div>

        <div class="label" style="margin-top:14px;">
          <span>Confirm Password</span>
          <span id="matchBadge" style="opacity:.75;font-weight:900;">‚Äî</span>
        </div>

        <div class="input-row">
          <input id="confirm" type="password" placeholder="Re-enter new password" autocomplete="new-password"/>
          <button id="toggle2" class="secondary icon-btn" type="button">üëÅ Show</button>
        </div>

        <div class="hint">
          Recommended length: <b>16+</b> with mixed characters.
        </div>

        <div id="status" class="status-line"></div>
      </div>

      <div class="section">
        <div class="label">
          <span>Generator</span>
          <span style="opacity:.75;font-weight:900;">Most secure ‚úÖ</span>
        </div>

        <div class="grid">
          <label class="check"><input type="checkbox" id="optUpper" checked /> Uppercase</label>
          <label class="check"><input type="checkbox" id="optLower" checked /> Lowercase</label>
          <label class="check"><input type="checkbox" id="optDigits" checked /> Digits</label>
          <label class="check"><input type="checkbox" id="optSymbols" checked /> Symbols</label>
        </div>

        <div class="range-row">
          <div style="min-width:70px;font-weight:900;">Length</div>
          <input type="range" id="len" min="12" max="32" value="18" />
          <div class="pill"><span id="lenVal">18</span></div>
        </div>

        <div class="actions" style="margin-top:14px;">
          <button id="gen" class="secondary" type="button">üé≤ Generate</button>
        </div>
      </div>

      <div class="actions">
        <button id="save" class="primary" type="button">üíæ Save</button>
        <button id="back" class="secondary" type="button">‚Üê Back</button>
      </div>
    </div>
  </div>
</body>
</html>
